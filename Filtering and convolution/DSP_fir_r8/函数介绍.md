```c
void DSP_fir_r8 (
    vector signed short *x,   
    signed short *h,       
    vector signed short  *r,
    int nh,
    int nr
)
```
**函数介绍**：Q15格式的fir滤波器
**计算**：r(n) = h(0)*x(n) + h(1)*x(n−1) + ... + h(nh−1)*x(n−nh+1)   where n = {0, 1, ... , nr−1}

**参数要求**：  

 *  nr >= 4; nr % 4 == 0 
 * nh >= 8; nh % 8 == 0 
 * r 16字对齐

**函数性能：**（单位：cycle）
| NR  | NH | natC | optC | vc_cycle | sa_cycle | asm_cycle |
|:---:|:---:|:----:|:----:|:--------:|:--------:|:---------:|
| 4   | 8  | 52   | 48   | 75       | 22       | 20        |
| 8   | 8  | 81   | 66   | 76       | 25       | 24        |
| 12  | 8  | 110  | 91   | 76       | 24       | 24        |
| 16  | 8  | 81   | 90   | 77       | 25       | 24        |
| 20  | 8  | 110  | 115  | 79       | 26       | 26        |
| 24  | 8  | 139  | 114  | 78       | 27       | 26        |
| 28  | 8  | 168  | 139  | 79       | 26       | 27        |
| 32  | 8  | 131  | 138  | 79       | 26       | 26        |
| 36  | 8  | 160  | 163  | 84       | 29       | 29        |
| 40  | 8  | 189  | 162  | 84       | 29       | 29        |
| 44  | 8  | 218  | 187  | 84       | 29       | 29        |
| 48  | 8  | 181  | 186  | 83       | 30       | 29        |
| 52  | 8  | 210  | 211  | 89       | 31       | 31        |
| 56  | 8  | 239  | 210  | 89       | 32       | 31        |
| 60  | 8  | 268  | 235  | 89       | 31       | 31        |
| 64  | 8  | 231  | 234  | 89       | 31       | 31        |
| 68  | 8  | 260  | 259  | 94       | 34       | 34        |
| 72  | 8  | 289  | 258  | 94       | 34       | 34        |
| 76  | 8  | 318  | 283  | 94       | 34       | 34        |
| 80  | 8  | 281  | 282  | 94       | 34       | 34        |
| 84  | 8  | 310  | 307  | 97       | 36       | 36        |
| 88  | 8  | 339  | 306  | 98       | 36       | 35        |
| 92  | 8  | 368  | 331  | 97       | 36       | 35        |
| 96  | 8  | 331  | 330  | 97       | 35       | 35        |
| 100 | 8  | 360  | 355  | 103      | 38       | 38        |
| 104 | 8  | 389  | 354  | 103      | 38       | 38        |
| 108 | 8  | 418  | 379  | 103      | 38       | 38        |
| 112 | 8  | 381  | 378  | 103      | 39       | 38        |
| 116 | 8  | 410  | 403  | 106      | 41       | 40        |
| 120 | 8  | 439  | 402  | 107      | 41       | 40        |
| 124 | 8  | 468  | 427  | 107      | 41       | 40        |
| 128 | 8  | 431  | 426  | 107      | 40       | 41        |
| 4   | 16 | 57   | 54   | 115      | 28       | 27        |
| 8   | 16 | 91   | 74   | 114      | 28       | 28        |
| 12  | 16 | 125  | 105  | 114      | 28       | 27        |
| 16  | 16 | 115  | 106  | 115      | 27       | 27        |
| 20  | 16 | 149  | 137  | 122      | 32       | 31        |
| 24  | 16 | 183  | 138  | 122      | 32       | 32        |
| 28  | 16 | 217  | 169  | 122      | 31       | 31        |
| 32  | 16 | 199  | 170  | 122      | 32       | 31        |
| 36  | 16 | 233  | 201  | 130      | 36       | 36        |
| 40  | 16 | 267  | 202  | 131      | 37       | 36        |
| 44  | 16 | 301  | 233  | 131      | 37       | 36        |
| 48  | 16 | 283  | 234  | 131      | 36       | 36        |
| 52  | 16 | 317  | 265  | 138      | 40       | 40        |
| 56  | 16 | 351  | 266  | 138      | 40       | 40        |
| 60  | 16 | 385  | 297  | 138      | 41       | 40        |
| 64  | 16 | 367  | 298  | 138      | 40       | 41        |
| 68  | 16 | 401  | 329  | 147      | 45       | 45        |
| 72  | 16 | 435  | 330  | 147      | 46       | 45        |
| 76  | 16 | 469  | 361  | 147      | 45       | 44        |
| 80  | 16 | 451  | 362  | 147      | 45       | 45        |
| 84  | 16 | 485  | 393  | 154      | 49       | 49        |
| 88  | 16 | 519  | 394  | 154      | 49       | 49        |
| 92  | 16 | 553  | 425  | 154      | 49       | 49        |
| 96  | 16 | 535  | 426  | 154      | 49       | 49        |
| 100 | 16 | 569  | 457  | 163      | 53       | 53        |
| 104 | 16 | 603  | 458  | 163      | 54       | 53        |
| 108 | 16 | 637  | 489  | 163      | 54       | 53        |
| 112 | 16 | 619  | 490  | 162      | 54       | 53        |
| 116 | 16 | 653  | 521  | 170      | 57       | 57        |
| 120 | 16 | 687  | 522  | 170      | 57       | 57        |
| 124 | 16 | 721  | 553  | 170      | 57       | 57        |
| 128 | 16 | 703  | 554  | 170      | 58       | 57        |
| 4   | 24 | 67   | 60   | 155      | 31       | 30        |
| 8   | 24 | 111  | 82   | 154      | 32       | 31        |
| 12  | 24 | 155  | 119  | 154      | 31       | 30        |
| 16  | 24 | 149  | 122  | 154      | 32       | 30        |
| 20  | 24 | 193  | 159  | 164      | 37       | 37        |
| 24  | 24 | 237  | 162  | 164      | 37       | 36        |
| 28  | 24 | 281  | 199  | 164      | 37       | 36        |
| 32  | 24 | 267  | 202  | 164      | 37       | 36        |
| 36  | 24 | 311  | 239  | 177      | 44       | 43        |
| 40  | 24 | 355  | 242  | 176      | 44       | 43        |
| 44  | 24 | 399  | 279  | 176      | 44       | 43        |
| 48  | 24 | 385  | 282  | 176      | 44       | 43        |
| 52  | 24 | 429  | 319  | 188      | 50       | 49        |
| 56  | 24 | 473  | 322  | 187      | 50       | 49        |
| 60  | 24 | 517  | 359  | 188      | 51       | 50        |
| 64  | 24 | 503  | 362  | 188      | 50       | 49        |
| 68  | 24 | 547  | 399  | 200      | 57       | 56        |
| 72  | 24 | 591  | 402  | 200      | 57       | 55        |
| 76  | 24 | 635  | 439  | 200      | 56       | 56        |
| 80  | 24 | 621  | 442  | 200      | 57       | 55        |
| 84  | 24 | 665  | 479  | 211      | 62       | 62        |
| 88  | 24 | 709  | 482  | 210      | 62       | 61        |
| 92  | 24 | 753  | 519  | 210      | 62       | 62        |
| 96  | 24 | 739  | 522  | 210      | 63       | 62        |
| 100 | 24 | 783  | 559  | 223      | 69       | 68        |
| 104 | 24 | 827  | 562  | 223      | 69       | 68        |
| 108 | 24 | 871  | 599  | 223      | 69       | 68        |
| 112 | 24 | 857  | 602  | 223      | 69       | 68        |
| 116 | 24 | 901  | 639  | 233      | 75       | 74        |
| 120 | 24 | 945  | 642  | 234      | 75       | 74        |
| 124 | 24 | 989  | 679  | 233      | 75       | 74        |
| 128 | 24 | 975  | 682  | 234      | 75       | 74        |
| 4   | 32 | 77   | 66   | 194      | 35       | 34        |
| 8   | 32 | 131  | 90   | 193      | 35       | 33        |
| 12  | 32 | 185  | 133  | 193      | 35       | 33        |
| 16  | 32 | 183  | 138  | 194      | 34       | 33        |
| 20  | 32 | 237  | 181  | 207      | 43       | 41        |
| 24  | 32 | 291  | 186  | 206      | 43       | 41        |
| 28  | 32 | 345  | 229  | 207      | 43       | 42        |
| 32  | 32 | 335  | 234  | 206      | 43       | 42        |
| 36  | 32 | 389  | 277  | 222      | 52       | 50        |
| 40  | 32 | 443  | 282  | 222      | 52       | 50        |
| 44  | 32 | 497  | 325  | 223      | 52       | 50        |
| 48  | 32 | 487  | 330  | 222      | 52       | 49        |
| 52  | 32 | 541  | 373  | 237      | 60       | 58        |
| 56  | 32 | 595  | 378  | 237      | 60       | 58        |
| 60  | 32 | 649  | 421  | 237      | 60       | 58        |
| 64  | 32 | 639  | 426  | 237      | 60       | 58        |
| 68  | 32 | 693  | 469  | 253      | 69       | 66        |
| 72  | 32 | 747  | 474  | 253      | 69       | 67        |
| 76  | 32 | 801  | 517  | 253      | 68       | 67        |
| 80  | 32 | 791  | 522  | 253      | 69       | 67        |
| 84  | 32 | 845  | 565  | 267      | 76       | 74        |
| 88  | 32 | 899  | 570  | 267      | 76       | 75        |
| 92  | 32 | 953  | 613  | 267      | 76       | 74        |
| 96  | 32 | 943  | 618  | 267      | 76       | 74        |
| 100 | 32 | 997  | 661  | 282      | 84       | 83        |
| 104 | 32 | 1051 | 666  | 283      | 84       | 83        |
| 108 | 32 | 1105 | 709  | 283      | 85       | 83        |
| 112 | 32 | 1095 | 714  | 283      | 84       | 83        |
| 116 | 32 | 1149 | 757  | 297      | 92       | 91        |
| 120 | 32 | 1203 | 762  | 297      | 92       | 90        |
| 124 | 32 | 1257 | 805  | 296      | 92       | 91        |
| 128 | 32 | 1247 | 810  | 296      | 92       | 91        |

*说明：optC为ti优化性能，vc为向量C，sa为线性汇编，asm为手写汇编*

*以下图表数据来源于上表*
<img src=".\result_image\DSP_fir_r8_cycle.png">

<img src=".\result_image\DSP_fir_r8_ratio.png">


**额外说明：** vectorC与手写汇编的最终结果与性能均以v2为准